{"version":3,"sources":["components/Text.js","components/Navigation.js","components/Page.js","components/SampleContent.js","components/AEMPage.js","components/AEMLeaf.js","components/VirtualPage.js","App.js","serviceWorker.js","server/CustomModelClient.js","index.js"],"names":["TextEditConfig","emptyLabel","isEmpty","props","text","trim","length","resourceType","Text","cqPath","richText","className","id","substr","lastIndexOf","data-rte-editelement","dangerouslySetInnerHTML","__html","AEMText","withMappable","Navigation","items","getRecursiveNavigationContent","item","childItems","url","children","map","childItem","key","title","classes","nav_item","href","getLink","nav_container","Page","MapTo","SampleContent1","SampleContent2","AEMPage","style","margin","pagePath","AEMLeaf","itemPath","VirtualPage","toAEMPath","path","process","window","location","origin","editorPrefix","document","head","querySelector","getAttribute","aemPathPrefix","normalize","App","to","Boolean","hostname","match","FETCH_CONFIG","headers","Authorization","modelClient","modelPath","err","Promise","reject","Error","this","_apiHost","fetch","then","response","status","json","error","statusText","ModelClient","ModelManager","initializeAsync","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","console","message"],"mappings":"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","file":"static/js/main.df65082d.chunk.js","sourcesContent":["import React from 'react';\nimport '../styles/common.css';\nimport {withMappable} from '@adobe/aem-react-editable-components';\n\nexport const TextEditConfig = {\n    emptyLabel: 'Text',\n    isEmpty: function(props) {\n        return !props || !props.text || props.text.trim().length < 1;\n    },\n    resourceType: \"we-retail-journal/components/text\"\n};\n\nconst Text = ({ cqPath, richText, text }) => {\n    const richTextContent = () => (\n        <div className=\"aem_text\" id={cqPath.substr(cqPath.lastIndexOf('/') + 1)} data-rte-editelement dangerouslySetInnerHTML={{__html: text}}/>\n    );\n    return richText ? richTextContent() : (<div className=\"aem_text\">{text}</div>);\n};\n\nexport default Text;\n\nexport const AEMText = withMappable(Text, TextEditConfig);\n","import React from 'react';\nimport classes from '../styles/common.css';\n\nconst Navigation = ({ items }) => {\n    const getLink = (item) => {\n        if (!item || !item.url || !item.title) {\n            return;\n        }\n\n        return <a className={classes.nav_item} href={ item.url }>{ item.title }</a>;\n    }\n\n    const getRecursiveNavigationContent = (item) => {\n        if (!item || !item.url) {\n            return;\n        }\n\n        let childItems;\n\n        if (item.children && item.children.length) {\n            childItems = <ul>\n                { item.children && item.children.map((childItem) => {\n                    return getRecursiveNavigationContent(childItem);\n                })\n                }</ul>;\n        }\n\n        return <li key={ item.url }>\n            {getLink(item)}\n            {childItems}\n        </li>;\n    }\n\n    return (\n        <header>\n            <nav>\n                <ul className={classes.nav_container}>\n                    { items && items.map((item) =>\n                        getRecursiveNavigationContent(item))\n                    }\n                </ul>\n            </nav>\n        </header>\n    );\n}\n\nexport default Navigation;\n","import { Page, MapTo, withMappable } from '@adobe/aem-react-editable-components';\nimport Text, { TextEditConfig } from './Text';\nimport Navigation from './Navigation';\n\n\nexport default withMappable(Page);\n\nMapTo(\"we-retail-journal/components/navigation\")(Navigation);\nMapTo('we-retail-journal/components/text')(Text, TextEditConfig);\n","import React from 'react';\nimport '../styles/common.css';\n\nexport const SampleContent1 = () => (\n    <div className=\"sample-content\">\n        <h4>SPA Sample Content</h4>\n        <p>\n            Now it is such a bizarrely improbable coincidence that anything so mind-bogglingly useful could have evolved purely by chance\n            that some thinkers have chosen to see it as the final and clinching proof of the non-existence of God.\n            The argument goes something like this: \"I refuse to prove that I exist,'\" says God, \"for proof denies faith, and without faith I am nothing.\"\n            \"But,\" says Man, \"The Babel fish is a dead giveaway, isn't it? It could not have evolved by chance. It proves you exist, and so therefore, by your own arguments, you don't. QED.\"\n            \"Oh dear,\" says God, \"I hadn't thought of that,\" and promptly vanishes in a puff of logic.\n            \"Oh, that was easy,\" says Man, and for an encore goes on to prove that black is white and gets himself killed on the next zebra crossing.\n        </p>\n    </div>\n);\n\nexport const SampleContent2 = () => (\n    <div className=\"sample-content\">\n        <h4>SPA Sample Content</h4>\n        <p>\n            A towel, [The Hitchhiker's Guide to the Galaxy] says, is about the most massively useful thing an interstellar hitchhiker can have.\n            Partly it has great practical value. You can wrap it around you for warmth as you bound across the cold moons of Jaglan Beta;\n            you can lie on it on the brilliant marble-sanded beaches of Santraginus V, inhaling the heady sea vapors; you can sleep under it\n            beneath the stars which shine so redly on the desert world of Kakrafoon; use it to sail a miniraft down the slow heavy River Moth;\n            wet it for use in hand-to-hand-combat; wrap it round your head to ward off noxious fumes or avoid the gaze of the Ravenous\n            Bugblatter Beast of Traal (such a mind-boggingly stupid animal, it assumes that if you can't see it, it can't see you);\n            you can wave your towel in emergencies as a distress signal, and of course dry yourself off with it if it still seems to be clean enough.\n        </p>\n    </div>\n);\n","import React from 'react';\nimport Page from './Page';\nimport { SampleContent2 } from './SampleContent';\n\nconst AEMPage = () => (\n    <main style={{margin: '10px'}}>\n        <h2>SPA + AEM Leaf Component</h2>\n        <SampleContent2 />\n\n        <h4>AEM Page</h4>\n        <Page pagePath='/content/we-retail-journal/react/en/blog' />\n\n    </main>\n);\n\nexport default AEMPage;\n","import React from 'react';\nimport { AEMText } from './Text';\nimport { SampleContent1, SampleContent2 } from './SampleContent';\n\nconst AEMLeaf = () => (\n    <main style={{margin: '10px'}}>\n        <h2>SPA + AEM Leaf Component</h2>\n        <SampleContent1 />\n\n        <h4>AEM Leaf Component</h4>\n        <AEMText\n          pagePath='/content/we-retail-journal/react/en/blog'\n          itemPath='/root/responsivegrid/article_header' />\n\n        <SampleContent2 />\n\n        <h4>AEM Leaf Component</h4>\n        <AEMText\n          pagePath='/content/we-retail-journal/react/en/blog'\n          itemPath='/root/responsivegrid/paragraph_1' />\n\n    </main>\n);\n\nexport default AEMLeaf;\n","import React from 'react';\nimport { AEMText } from './Text';\nimport { SampleContent2 } from './SampleContent';\n\nconst VirtualPage = () => (\n    <main style={{margin: '10px'}}>\n        <h2>SPA + AEM Virtual Components</h2>\n        <SampleContent2 />\n\n        <h4>AEM Virtual Components</h4>\n        <AEMText\n         pagePath='/content/we-retail-journal/react/en/blog/aboutus'\n         itemPath='/root/responsivegrid/paragraph_25' />\n        <AEMText\n         pagePath='/content/we-retail-journal/react/en/blog/aboutus'\n         itemPath='/root/responsivegrid/paragraph_28' />\n    </main>\n);\n\nexport default VirtualPage;\n","import React from 'react';\nimport {\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport './App.css';\nimport { normalize } from 'path';\n\nimport AEMPage from './components/AEMPage';\nimport AEMLeaf from './components/AEMLeaf';\nimport VirtualPage from './components/VirtualPage';\n\n//to be moved out of app\nconst toAEMPath = (path) => {\n    const isLoadedInAEM = window.location.origin === process.env.REACT_APP_AEM_HOST;\n\n    if(isLoadedInAEM) {\n        const wcmMode = document.head.querySelector('meta[property=\"cq:wcmmode\"]')?.getAttribute('content');\n        const isEditorMode = wcmMode === \"edit\";\n        const editorPrefix = isEditorMode ? '(/editor.html)?' : '';\n\n        const aemPathPrefix = `/content/${process.env.REACT_APP_AEM_PROJECT_NAME}`;\n        const EXTENSION = 'html';\n\n        const newPath = normalize(`${editorPrefix}${aemPathPrefix}${path}(.${EXTENSION})?`);\n        return newPath;\n    }\n    return path;\n};\n\nconst App = () => {\n    return (\n      <div className=\"App\">\n        <nav>\n            <ul className=\"app-nav\">\n              <li>\n                <Link to=\"/leaf\">Leaf</Link>\n              </li>\n              <li>\n                <Link to=\"/virtual\">Virtual</Link>\n              </li>\n              <li>\n                <Link to=\"/page\">Page</Link>\n              </li>\n            </ul>\n            </nav>\n        <hr />\n\n        <Switch>\n          <Route path={toAEMPath(\"/leaf\")}>\n            <AEMLeaf />\n          </Route>\n          <Route path={toAEMPath(\"/virtual\")}>\n           <VirtualPage />\n         </Route>\n         <Route path={toAEMPath(\"/page\")}>\n           <AEMPage />\n         </Route>\n        </Switch>\n    </div>\n);\n}\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { ModelClient } from '@adobe/aem-spa-page-model-manager';\n\nconst FETCH_CONFIG = {\n    headers: {\n        Authorization: 'Basic YWRtaW46YWRtaW4='\n    }\n};\n\n/**\n * Custom ModelClient meant to demonstrate how to customize the request sent to the remote server\n */\nexport class CustomModelClient extends ModelClient {\n\n    /**\n     * Fetches a model using the given a resource path\n     *\n     * @param {string} modelPath - Path to the model\n     * @return {*}\n     */\n    fetch(modelPath) {\n        if (!modelPath) {\n            const err = 'Fetching model rejected for path: ' + modelPath;\n            return Promise.reject(new Error(err));\n        }\n\n        // Either the API host has been provided or we make an absolute request relative to the current host\n        const url = `${this._apiHost}${modelPath}`;\n        return fetch(url, FETCH_CONFIG).then(function(response) {\n            if (response.status >= 200 && response.status < 300) {\n            //   var promise = new Promise(function(resolve, reject) {\n            //    window.setTimeout(function() {\n            //      resolve(response.json());\n            //    }, 5000);\n            //  });\n            //  return promise;\n             return response.json();\n            } else {\n                const error = new Error('while fetching the model for url: ' + url, response.statusText || response.status);\n                error.response = response;\n                return Promise.reject(error);\n            }\n        });\n    }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from \"react-router-dom\"\nimport { ModelManager } from \"@adobe/aem-spa-page-model-manager\";\n\nimport { CustomModelClient } from './server/CustomModelClient';\n\n\nconst modelClient = new CustomModelClient(process.env.REACT_APP_AEM_HOST);\nModelManager.initializeAsync({\n    modelClient,\n    path: \"/content/we-retail-journal/react/en.model.json\"\n});\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}